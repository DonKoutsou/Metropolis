[gd_scene load_steps=42 format=2]

[ext_resource path="res://Assets/FastLegs/M_Character_FastLegs_L.material" type="Material" id=1]
[ext_resource path="res://Assets/Gen3Machine/Gen3Machine.glb" type="PackedScene" id=2]
[ext_resource path="res://Assets/Skele_Arm/Arms_Mat_Character_L.material" type="Material" id=3]
[ext_resource path="res://Assets/Gen3Machine/Body/BodyMat.tres" type="Material" id=4]
[ext_resource path="res://Assets/Gen3Machine/Body/FaceMat.tres" type="Material" id=5]
[ext_resource path="res://Assets/Gen3Machine/CharBlendTree.tres" type="AnimationNodeBlendTree" id=6]
[ext_resource path="res://Assets/NormalLegs/M_Character_Legs_L.material" type="Material" id=7]
[ext_resource path="res://Assets/Gen3Machine/Eye.material" type="Material" id=8]
[ext_resource path="res://Assets/Clouds/Textures/smoke_01.png" type="Texture" id=9]
[ext_resource path="res://Scripts/Character_Animations.cs" type="Script" id=10]
[ext_resource path="res://Assets/Sounds/WalkingSound.mp3" type="AudioStream" id=11]
[ext_resource path="res://Assets/NormalLegs/M_Character_Legs_R.material" type="Material" id=12]
[ext_resource path="res://Assets/FastLegs/M_Character_FastLegs_R.material" type="Material" id=13]
[ext_resource path="res://Scripts/CharacterSoundManager.cs" type="Script" id=14]
[ext_resource path="res://Assets/Gen3Machine/Textures/BabyMat.tres" type="Material" id=15]
[ext_resource path="res://shaders/OutlineShader.tres" type="Material" id=17]
[ext_resource path="res://Scripts/LoddedCharacter.cs" type="Script" id=18]
[ext_resource path="res://Assets/Skele_Arm/Arms_Mat_Character_R.material" type="Material" id=19]

[sub_resource type="SpatialMaterial" id=63]
albedo_color = Color( 0.952941, 0.921569, 0.831373, 1 )
emission_enabled = true
emission = Color( 1, 0.913725, 0.784314, 1 )
emission_energy = 16.0
emission_operator = 0
emission_on_uv2 = false

[sub_resource type="SphereMesh" id=64]
resource_local_to_scene = true
material = SubResource( 63 )
radius = 2.0
height = 4.0
radial_segments = 4
rings = 4

[sub_resource type="AnimationNodeAnimation" id=36]
animation = "Dead_loop"

[sub_resource type="AnimationNodeBlendTree" id=37]
graph_offset = Vector2( -376.098, -84.9461 )
nodes/Animation/node = SubResource( 36 )
nodes/Animation/position = Vector2( -53.3333, 160 )
node_connections = [ "output", 0, "Animation" ]

[sub_resource type="AnimationNodeAnimation" id=53]
animation = "GuitarPlayer_loop"

[sub_resource type="AnimationNodeAnimation" id=59]
animation = "SititngChair_loop"

[sub_resource type="AnimationNodeAnimation" id=47]
animation = "Sitting_loop"

[sub_resource type="AnimationNodeBlend2" id=60]
filter_enabled = true
filters = [ "Armature/Skeleton:Bone", "Armature/Skeleton:mixamorig_Hips", "Armature/Skeleton:mixamorig_LeftArm", "Armature/Skeleton:mixamorig_LeftFoot", "Armature/Skeleton:mixamorig_LeftForeArm", "Armature/Skeleton:mixamorig_LeftHand", "Armature/Skeleton:mixamorig_LeftHandIndex1", "Armature/Skeleton:mixamorig_LeftHandIndex2", "Armature/Skeleton:mixamorig_LeftHandIndex3", "Armature/Skeleton:mixamorig_LeftHandIndex4", "Armature/Skeleton:mixamorig_LeftHandMiddle1", "Armature/Skeleton:mixamorig_LeftHandMiddle2", "Armature/Skeleton:mixamorig_LeftHandMiddle3", "Armature/Skeleton:mixamorig_LeftHandMiddle4", "Armature/Skeleton:mixamorig_LeftHandPinky1", "Armature/Skeleton:mixamorig_LeftHandPinky2", "Armature/Skeleton:mixamorig_LeftHandPinky3", "Armature/Skeleton:mixamorig_LeftHandPinky4", "Armature/Skeleton:mixamorig_LeftHandRing1", "Armature/Skeleton:mixamorig_LeftHandRing2", "Armature/Skeleton:mixamorig_LeftHandRing3", "Armature/Skeleton:mixamorig_LeftHandRing4", "Armature/Skeleton:mixamorig_LeftHandThumb1", "Armature/Skeleton:mixamorig_LeftHandThumb2", "Armature/Skeleton:mixamorig_LeftHandThumb3", "Armature/Skeleton:mixamorig_LeftHandThumb4", "Armature/Skeleton:mixamorig_LeftLeg", "Armature/Skeleton:mixamorig_LeftShoulder", "Armature/Skeleton:mixamorig_LeftToeBase", "Armature/Skeleton:mixamorig_LeftToe_End", "Armature/Skeleton:mixamorig_LeftUpLeg", "Armature/Skeleton:mixamorig_Neck", "Armature/Skeleton:mixamorig_RightArm", "Armature/Skeleton:mixamorig_RightFoot", "Armature/Skeleton:mixamorig_RightForeArm", "Armature/Skeleton:mixamorig_RightHand", "Armature/Skeleton:mixamorig_RightHandIndex1", "Armature/Skeleton:mixamorig_RightHandIndex2", "Armature/Skeleton:mixamorig_RightHandIndex3", "Armature/Skeleton:mixamorig_RightHandIndex4", "Armature/Skeleton:mixamorig_RightHandMiddle1", "Armature/Skeleton:mixamorig_RightHandMiddle2", "Armature/Skeleton:mixamorig_RightHandMiddle3", "Armature/Skeleton:mixamorig_RightHandMiddle4", "Armature/Skeleton:mixamorig_RightHandPinky1", "Armature/Skeleton:mixamorig_RightHandPinky2", "Armature/Skeleton:mixamorig_RightHandPinky3", "Armature/Skeleton:mixamorig_RightHandPinky4", "Armature/Skeleton:mixamorig_RightHandRing1", "Armature/Skeleton:mixamorig_RightHandRing2", "Armature/Skeleton:mixamorig_RightHandRing3", "Armature/Skeleton:mixamorig_RightHandRing4", "Armature/Skeleton:mixamorig_RightHandThumb1", "Armature/Skeleton:mixamorig_RightHandThumb2", "Armature/Skeleton:mixamorig_RightHandThumb3", "Armature/Skeleton:mixamorig_RightHandThumb4", "Armature/Skeleton:mixamorig_RightLeg", "Armature/Skeleton:mixamorig_RightShoulder", "Armature/Skeleton:mixamorig_RightToeBase", "Armature/Skeleton:mixamorig_RightToe_End", "Armature/Skeleton:mixamorig_RightUpLeg", "Armature/Skeleton:mixamorig_Spine", "Armature/Skeleton:mixamorig_Spine1", "Armature/Skeleton:mixamorig_Spine2" ]

[sub_resource type="AnimationNodeBlend2" id=54]
filter_enabled = true
filters = [ "Armature/Skeleton:mixamorig_LeftArm", "Armature/Skeleton:mixamorig_LeftForeArm", "Armature/Skeleton:mixamorig_LeftHand", "Armature/Skeleton:mixamorig_LeftHandIndex1", "Armature/Skeleton:mixamorig_LeftHandIndex2", "Armature/Skeleton:mixamorig_LeftHandIndex3", "Armature/Skeleton:mixamorig_LeftHandIndex4", "Armature/Skeleton:mixamorig_LeftHandMiddle1", "Armature/Skeleton:mixamorig_LeftHandMiddle2", "Armature/Skeleton:mixamorig_LeftHandMiddle3", "Armature/Skeleton:mixamorig_LeftHandMiddle4", "Armature/Skeleton:mixamorig_LeftHandPinky1", "Armature/Skeleton:mixamorig_LeftHandPinky2", "Armature/Skeleton:mixamorig_LeftHandPinky3", "Armature/Skeleton:mixamorig_LeftHandPinky4", "Armature/Skeleton:mixamorig_LeftHandRing1", "Armature/Skeleton:mixamorig_LeftHandRing2", "Armature/Skeleton:mixamorig_LeftHandRing3", "Armature/Skeleton:mixamorig_LeftHandRing4", "Armature/Skeleton:mixamorig_LeftHandThumb2", "Armature/Skeleton:mixamorig_LeftHandThumb3", "Armature/Skeleton:mixamorig_LeftHandThumb4", "Armature/Skeleton:mixamorig_LeftLeg", "Armature/Skeleton:mixamorig_LeftShoulder", "Armature/Skeleton:mixamorig_LeftUpLeg", "Armature/Skeleton:mixamorig_RightArm", "Armature/Skeleton:mixamorig_RightForeArm", "Armature/Skeleton:mixamorig_RightHand", "Armature/Skeleton:mixamorig_RightHandIndex1", "Armature/Skeleton:mixamorig_RightHandIndex2", "Armature/Skeleton:mixamorig_RightHandIndex3", "Armature/Skeleton:mixamorig_RightHandIndex4", "Armature/Skeleton:mixamorig_RightHandMiddle1", "Armature/Skeleton:mixamorig_RightHandMiddle2", "Armature/Skeleton:mixamorig_RightHandMiddle3", "Armature/Skeleton:mixamorig_RightHandMiddle4", "Armature/Skeleton:mixamorig_RightHandPinky1", "Armature/Skeleton:mixamorig_RightHandPinky2", "Armature/Skeleton:mixamorig_RightHandPinky3", "Armature/Skeleton:mixamorig_RightHandPinky4", "Armature/Skeleton:mixamorig_RightHandRing1", "Armature/Skeleton:mixamorig_RightHandRing2", "Armature/Skeleton:mixamorig_RightHandRing3", "Armature/Skeleton:mixamorig_RightHandRing4", "Armature/Skeleton:mixamorig_RightHandThumb1", "Armature/Skeleton:mixamorig_RightHandThumb2", "Armature/Skeleton:mixamorig_RightHandThumb3", "Armature/Skeleton:mixamorig_RightHandThumb4", "Armature/Skeleton:mixamorig_RightShoulder" ]

[sub_resource type="AnimationNodeBlendTree" id=38]
graph_offset = Vector2( -584.8, 43.2 )
nodes/Animation/node = SubResource( 47 )
nodes/Animation/position = Vector2( 0, 146.667 )
"nodes/Animation 2/node" = SubResource( 53 )
"nodes/Animation 2/position" = Vector2( -26.6667, 386.667 )
"nodes/Animation 3/node" = SubResource( 59 )
"nodes/Animation 3/position" = Vector2( -66.6667, 266.667 )
nodes/ChairBlend/node = SubResource( 60 )
nodes/ChairBlend/position = Vector2( 186.667, 160 )
nodes/IntrumentBlend/node = SubResource( 54 )
nodes/IntrumentBlend/position = Vector2( 360, 266.667 )
nodes/output/position = Vector2( 533.333, 160 )
node_connections = [ "output", 0, "IntrumentBlend", "ChairBlend", 0, "Animation", "ChairBlend", 1, "Animation 3", "IntrumentBlend", 0, "ChairBlend", "IntrumentBlend", 1, "Animation 2" ]

[sub_resource type="AnimationNodeAnimation" id=55]
animation = "Standing"

[sub_resource type="AnimationNodeStateMachineTransition" id=39]
advance_condition = "Dead"
xfade_time = 0.5

[sub_resource type="AnimationNodeStateMachineTransition" id=42]
advance_condition = "Sitting"
xfade_time = 0.5

[sub_resource type="AnimationNodeStateMachineTransition" id=51]
advance_condition = "Dead"
xfade_time = 1.0

[sub_resource type="AnimationNodeStateMachineTransition" id=52]
advance_condition = "Sitting"
xfade_time = 1.0

[sub_resource type="AnimationNodeStateMachineTransition" id=57]
switch_mode = 2
auto_advance = true
xfade_time = 0.5

[sub_resource type="AnimationNodeStateMachineTransition" id=58]
advance_condition = "Idle"

[sub_resource type="AnimationNodeStateMachineTransition" id=56]
advance_condition = "Idle"

[sub_resource type="AnimationNodeStateMachine" id=45]
resource_local_to_scene = true
states/Dead/node = SubResource( 37 )
states/Dead/position = Vector2( 707.333, 254.235 )
states/Sitting/node = SubResource( 38 )
states/Sitting/position = Vector2( 522.267, 48 )
states/Standing/node = SubResource( 55 )
states/Standing/position = Vector2( 509.111, 171.334 )
states/Walking/node = ExtResource( 6 )
states/Walking/position = Vector2( 329.2, 235.866 )
transitions = [ "Walking", "Dead", SubResource( 39 ), "Walking", "Sitting", SubResource( 42 ), "Sitting", "Dead", SubResource( 51 ), "Dead", "Sitting", SubResource( 52 ), "Standing", "Walking", SubResource( 57 ), "Sitting", "Standing", SubResource( 58 ), "Dead", "Standing", SubResource( 56 ) ]
start_node = "Walking"
graph_offset = Vector2( -352, -31 )

[sub_resource type="AnimationNodeStateMachinePlayback" id=46]

[sub_resource type="ParticlesMaterial" id=34]
lifetime_randomness = 0.24
emission_shape = 2
emission_box_extents = Vector3( 0.6, 0.1, 0.2 )
direction = Vector3( 0, 5, -10 )
spread = 9.06
gravity = Vector3( 0, 0, 0 )
initial_velocity = 1.0

[sub_resource type="SpatialMaterial" id=61]
flags_transparent = true
params_blend_mode = 1
params_depth_draw_mode = 2
params_billboard_mode = 3
particles_anim_h_frames = 1
particles_anim_v_frames = 1
particles_anim_loop = false
albedo_color = Color( 1, 1, 1, 0.592157 )
albedo_texture = ExtResource( 9 )

[sub_resource type="QuadMesh" id=62]
material = SubResource( 61 )

[node name="Gen3Machine" instance=ExtResource( 2 )]

[node name="Armature" parent="." index="0"]
transform = Transform( 0.024, 0, 0, 0, 0.024, 6.77112e-09, 0, -6.77112e-09, 0.024, 0, 0, 0 )

[node name="Skeleton" parent="Armature" index="0"]
transform = Transform( 1, 0, 0, 0, 1, 5.68434e-14, 0, -2.84217e-14, 1, -0.314196, 5.03759e-08, -0.178556 )
script = ExtResource( 18 )

[node name="HeadRot2Pivot" type="Spatial" parent="Armature/Skeleton" index="0"]
transform = Transform( -1, 0, -8.74228e-08, 2.74152e-16, 1, -3.14154e-09, 8.74228e-08, -2.27374e-13, -1, -4.16391, 280.036, 21.4344 )

[node name="HeadRot2" type="Spatial" parent="Armature/Skeleton/HeadRot2Pivot" index="0"]
transform = Transform( 1, 0, 0, 0, 1, -2.84217e-14, 0, 2.84217e-14, 1, 0, 0, 0 )

[node name="BoneAttachment" type="BoneAttachment" parent="Armature/Skeleton" index="1"]
transform = Transform( 0.996343, -0.0765562, -0.0379269, 0.0706187, 0.987807, -0.138747, 0.0480864, 0.135562, 0.989601, -2.67007, 264.944, 12.6467 )
bone_name = "mixamorig_Head"

[node name="HeadPivot" type="Spatial" parent="Armature/Skeleton/BoneAttachment" index="0"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 23.077, 23.499 )

[node name="MeshInstance" type="MeshInstance" parent="Armature/Skeleton/BoneAttachment/HeadPivot" index="0"]
transform = Transform( 1, -3.91155e-08, 7.45058e-09, 5.40167e-08, 1, 7.45058e-08, 7.45058e-09, -2.98023e-08, 1, 0.0186672, 1.31384, -2.99345 )
mesh = SubResource( 64 )

[node name="NightLight" type="SpotLight" parent="Armature/Skeleton/BoneAttachment/HeadPivot" index="1"]
transform = Transform( -41.6591, 0.459687, 0.647424, 0.605328, 40.3729, 10.2845, -0.51386, 10.292, -40.3723, 0, 0, 30 )
portal_mode = 1
include_in_bound = false
allow_merging = false
layers = 3
light_color = Color( 0.992157, 0.952941, 0.772549, 1 )
light_energy = 20.0
light_bake_mode = 0
shadow_enabled = true
shadow_bias = 2.0
shadow_reverse_cull_face = true
spot_range = 58.3185
spot_angle = 55.0843
spot_angle_attenuation = 0.25

[node name="HeadRot" type="Spatial" parent="Armature/Skeleton/BoneAttachment" index="1"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 16.214, 6.659 )

[node name="HeadRotT" type="RemoteTransform" parent="Armature/Skeleton/BoneAttachment" index="2"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 16.214, 6.659 )
remote_path = NodePath("../../HeadRot2Pivot")
update_rotation = false
update_scale = false

[node name="InstrumentAtatchment" type="BoneAttachment" parent="Armature/Skeleton" index="2"]
transform = Transform( 0.997846, -0.0309901, -0.0578079, 0.0287198, 0.998799, -0.0397001, 0.0589688, 0.0379544, 0.997538, 0.73749, 213.045, -0.212846 )
bone_name = "mixamorig_Spine1"

[node name="PlayingAtatchment" type="RemoteTransform" parent="Armature/Skeleton/InstrumentAtatchment" index="0"]
transform = Transform( 0.264538, 0.94673, -0.183636, -0.942656, 0.294032, 0.157923, 0.203507, 0.131329, 0.970223, -48.6765, -6.68165, 25.2293 )
use_global_coordinates = false
update_scale = false

[node name="HolsterAtatchment" type="RemoteTransform" parent="Armature/Skeleton/InstrumentAtatchment" index="1"]
transform = Transform( -0.914001, 0.401428, -0.0587828, 0.400667, 0.915891, 0.024705, 0.0637551, -0.000970755, -0.997962, -29.2251, -41.0474, -25.1529 )
remote_path = NodePath("../Instrument")
use_global_coordinates = false
update_scale = false

[node name="Instrument" type="Spatial" parent="Armature/Skeleton/InstrumentAtatchment" index="2"]
transform = Transform( -37.9657, 16.6749, -2.44876, 16.6429, 38.0451, 1.02921, 2.64825, -0.040322, -41.5738, -29.2251, -41.0474, -25.1529 )

[node name="Arm_L" parent="Armature/Skeleton" index="3"]
material_overlay = ExtResource( 17 )
material/0 = ExtResource( 3 )

[node name="Arm_L_LOD" parent="Armature/Skeleton" index="4"]
visible = false
material/0 = ExtResource( 3 )

[node name="Arm_R" parent="Armature/Skeleton" index="5"]
material_overlay = ExtResource( 17 )
material/0 = ExtResource( 19 )

[node name="Arm_R_LOD" parent="Armature/Skeleton" index="6"]
visible = false
material_overlay = ExtResource( 17 )
material/0 = ExtResource( 19 )

[node name="BabyLowpolySurface1" parent="Armature/Skeleton" index="7"]
material/0 = ExtResource( 15 )

[node name="Body" parent="Armature/Skeleton" index="8"]
material_overlay = ExtResource( 17 )
material/0 = ExtResource( 4 )

[node name="Body_LOD" parent="Armature/Skeleton" index="9"]
visible = false
material/0 = ExtResource( 4 )

[node name="eyes" parent="Armature/Skeleton" index="10"]
material/0 = ExtResource( 8 )

[node name="Face" parent="Armature/Skeleton" index="11"]
material_overlay = ExtResource( 17 )
material/0 = ExtResource( 5 )

[node name="Face_LOD" parent="Armature/Skeleton" index="12"]
visible = false
material_overlay = ExtResource( 17 )
material/0 = ExtResource( 5 )

[node name="Leg2_L" parent="Armature/Skeleton" index="13"]
material_overlay = ExtResource( 17 )
material/0 = ExtResource( 7 )
material/1 = ExtResource( 7 )

[node name="Leg2_L_LOD" parent="Armature/Skeleton" index="14"]
visible = false
material_overlay = ExtResource( 17 )
material/0 = ExtResource( 7 )
material/1 = ExtResource( 7 )

[node name="Leg2_R" parent="Armature/Skeleton" index="15"]
material_overlay = ExtResource( 17 )
material/0 = ExtResource( 12 )
material/1 = ExtResource( 12 )

[node name="Leg2_R_LOD" parent="Armature/Skeleton" index="16"]
visible = false
material_overlay = ExtResource( 17 )
material/0 = ExtResource( 12 )
material/1 = ExtResource( 12 )

[node name="Leg_L" parent="Armature/Skeleton" index="17"]
visible = false
material_overlay = ExtResource( 17 )
material/0 = ExtResource( 1 )

[node name="Leg_L_LOD" parent="Armature/Skeleton" index="18"]
visible = false
material_overlay = ExtResource( 17 )
material/0 = ExtResource( 1 )

[node name="Leg_R" parent="Armature/Skeleton" index="19"]
visible = false
material_overlay = ExtResource( 17 )
material/0 = ExtResource( 13 )

[node name="Leg_R_LOD" parent="Armature/Skeleton" index="20"]
visible = false
material_overlay = ExtResource( 17 )
material/0 = ExtResource( 13 )

[node name="LegsUpper" parent="Armature/Skeleton" index="21"]
material_overlay = ExtResource( 17 )
material/0 = ExtResource( 4 )

[node name="LegsUpper_LOD" parent="Armature/Skeleton" index="22"]
visible = false
material_overlay = ExtResource( 17 )
material/0 = ExtResource( 4 )

[node name="CharacterSoundManager" type="Spatial" parent="." index="1"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 6.63771, 0 )
script = ExtResource( 14 )

[node name="Walk" type="AudioStreamPlayer3D" parent="CharacterSoundManager" index="0"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -6.23199, 0 )
stream = ExtResource( 11 )
unit_db = 20.0
unit_size = 2.0
max_db = 6.0
max_distance = 4096.0
area_mask = 0

[node name="AnimationPlayer" parent="." index="2"]
script = ExtResource( 10 )

[node name="AnimationTree" type="AnimationTree" parent="AnimationPlayer" index="0"]
tree_root = SubResource( 45 )
anim_player = NodePath("..")
active = true
process_mode = 0
root_motion_track = NodePath("Armature/Skeleton:Bone")
parameters/playback = SubResource( 46 )
parameters/conditions/Dead = false
parameters/conditions/Idle = false
parameters/conditions/Sitting = false
parameters/Sitting/ChairBlend/blend_amount = 0.0
parameters/Sitting/IntrumentBlend/blend_amount = 0.0
parameters/Walking/ClimbDown/active = false
parameters/Walking/ClimbUp/active = false
parameters/Walking/Idle_Run_Blend/blend_amount = 0.0
parameters/Walking/Idle_Walk_Blend/blend_amount = 0.0
parameters/Walking/IntrumentBlend/blend_amount = 0.0
parameters/Walking/JumpShot/active = false
parameters/Walking/TimeScale/scale = 1.0
"parameters/Walking/TimeScale 2/scale" = 1.0

[node name="Particles" type="Particles" parent="." index="3"]
sorting_use_aabb_center = false
cast_shadow = 0
generate_lightmap = false
local_coords = false
draw_order = 2
process_material = SubResource( 34 )
draw_pass_1 = SubResource( 62 )
