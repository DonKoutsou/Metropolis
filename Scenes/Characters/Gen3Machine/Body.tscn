[gd_scene load_steps=31 format=2]

[ext_resource path="res://Assets/FastLegs/M_Legs.material" type="Material" id=1]
[ext_resource path="res://Assets/Gen3Machine/Gen3Machine.glb" type="PackedScene" id=2]
[ext_resource path="res://Assets/Skele_Arm/Arms_Mat.material" type="Material" id=3]
[ext_resource path="res://Assets/Gen3Machine/Body/BodyMat.tres" type="Material" id=4]
[ext_resource path="res://Assets/Gen3Machine/Body/FaceMat.tres" type="Material" id=5]
[ext_resource path="res://Assets/Gen3Machine/CharBlendTree.tres" type="AnimationNodeBlendTree" id=6]
[ext_resource path="res://Scenes/Items/Bouzouki.tscn" type="PackedScene" id=7]
[ext_resource path="res://Assets/Clouds/Textures/smoke_01.png" type="Texture" id=9]
[ext_resource path="res://Scripts/Character_Animations.cs" type="Script" id=10]

[sub_resource type="AnimationNodeAnimation" id=36]
animation = "Dead_loop"

[sub_resource type="AnimationNodeBlendTree" id=37]
graph_offset = Vector2( -376.098, -84.9461 )
nodes/Animation/node = SubResource( 36 )
nodes/Animation/position = Vector2( -53.3333, 160 )
node_connections = [ "output", 0, "Animation" ]

[sub_resource type="AnimationNodeAnimation" id=53]
animation = "GuitarPlayer_loop"

[sub_resource type="AnimationNodeAnimation" id=59]
animation = "SititngChair_loop"

[sub_resource type="AnimationNodeAnimation" id=47]
animation = "Sitting_loop"

[sub_resource type="AnimationNodeBlend2" id=60]
filter_enabled = true
filters = [ "Armature/Skeleton:Bone", "Armature/Skeleton:mixamorig_Hips", "Armature/Skeleton:mixamorig_LeftArm", "Armature/Skeleton:mixamorig_LeftFoot", "Armature/Skeleton:mixamorig_LeftForeArm", "Armature/Skeleton:mixamorig_LeftHand", "Armature/Skeleton:mixamorig_LeftHandIndex1", "Armature/Skeleton:mixamorig_LeftHandIndex2", "Armature/Skeleton:mixamorig_LeftHandIndex3", "Armature/Skeleton:mixamorig_LeftHandIndex4", "Armature/Skeleton:mixamorig_LeftHandMiddle1", "Armature/Skeleton:mixamorig_LeftHandMiddle2", "Armature/Skeleton:mixamorig_LeftHandMiddle3", "Armature/Skeleton:mixamorig_LeftHandMiddle4", "Armature/Skeleton:mixamorig_LeftHandPinky1", "Armature/Skeleton:mixamorig_LeftHandPinky2", "Armature/Skeleton:mixamorig_LeftHandPinky3", "Armature/Skeleton:mixamorig_LeftHandPinky4", "Armature/Skeleton:mixamorig_LeftHandRing1", "Armature/Skeleton:mixamorig_LeftHandRing2", "Armature/Skeleton:mixamorig_LeftHandRing3", "Armature/Skeleton:mixamorig_LeftHandRing4", "Armature/Skeleton:mixamorig_LeftHandThumb1", "Armature/Skeleton:mixamorig_LeftHandThumb2", "Armature/Skeleton:mixamorig_LeftHandThumb3", "Armature/Skeleton:mixamorig_LeftHandThumb4", "Armature/Skeleton:mixamorig_LeftLeg", "Armature/Skeleton:mixamorig_LeftShoulder", "Armature/Skeleton:mixamorig_LeftToeBase", "Armature/Skeleton:mixamorig_LeftToe_End", "Armature/Skeleton:mixamorig_LeftUpLeg", "Armature/Skeleton:mixamorig_Neck", "Armature/Skeleton:mixamorig_RightArm", "Armature/Skeleton:mixamorig_RightFoot", "Armature/Skeleton:mixamorig_RightForeArm", "Armature/Skeleton:mixamorig_RightHand", "Armature/Skeleton:mixamorig_RightHandIndex1", "Armature/Skeleton:mixamorig_RightHandIndex2", "Armature/Skeleton:mixamorig_RightHandIndex3", "Armature/Skeleton:mixamorig_RightHandIndex4", "Armature/Skeleton:mixamorig_RightHandMiddle1", "Armature/Skeleton:mixamorig_RightHandMiddle2", "Armature/Skeleton:mixamorig_RightHandMiddle3", "Armature/Skeleton:mixamorig_RightHandMiddle4", "Armature/Skeleton:mixamorig_RightHandPinky1", "Armature/Skeleton:mixamorig_RightHandPinky2", "Armature/Skeleton:mixamorig_RightHandPinky3", "Armature/Skeleton:mixamorig_RightHandPinky4", "Armature/Skeleton:mixamorig_RightHandRing1", "Armature/Skeleton:mixamorig_RightHandRing2", "Armature/Skeleton:mixamorig_RightHandRing3", "Armature/Skeleton:mixamorig_RightHandRing4", "Armature/Skeleton:mixamorig_RightHandThumb1", "Armature/Skeleton:mixamorig_RightHandThumb2", "Armature/Skeleton:mixamorig_RightHandThumb3", "Armature/Skeleton:mixamorig_RightHandThumb4", "Armature/Skeleton:mixamorig_RightLeg", "Armature/Skeleton:mixamorig_RightShoulder", "Armature/Skeleton:mixamorig_RightToeBase", "Armature/Skeleton:mixamorig_RightToe_End", "Armature/Skeleton:mixamorig_RightUpLeg", "Armature/Skeleton:mixamorig_Spine", "Armature/Skeleton:mixamorig_Spine1", "Armature/Skeleton:mixamorig_Spine2" ]

[sub_resource type="AnimationNodeBlend2" id=54]
filter_enabled = true
filters = [ "Armature/Skeleton:mixamorig_Head", "Armature/Skeleton:mixamorig_LeftArm", "Armature/Skeleton:mixamorig_LeftForeArm", "Armature/Skeleton:mixamorig_LeftHand", "Armature/Skeleton:mixamorig_LeftHandIndex1", "Armature/Skeleton:mixamorig_LeftHandIndex2", "Armature/Skeleton:mixamorig_LeftHandIndex3", "Armature/Skeleton:mixamorig_LeftHandIndex4", "Armature/Skeleton:mixamorig_LeftHandMiddle1", "Armature/Skeleton:mixamorig_LeftHandMiddle2", "Armature/Skeleton:mixamorig_LeftHandMiddle3", "Armature/Skeleton:mixamorig_LeftHandMiddle4", "Armature/Skeleton:mixamorig_LeftHandPinky1", "Armature/Skeleton:mixamorig_LeftHandPinky2", "Armature/Skeleton:mixamorig_LeftHandPinky3", "Armature/Skeleton:mixamorig_LeftHandPinky4", "Armature/Skeleton:mixamorig_LeftHandRing1", "Armature/Skeleton:mixamorig_LeftHandRing2", "Armature/Skeleton:mixamorig_LeftHandRing3", "Armature/Skeleton:mixamorig_LeftHandRing4", "Armature/Skeleton:mixamorig_LeftHandThumb2", "Armature/Skeleton:mixamorig_LeftHandThumb3", "Armature/Skeleton:mixamorig_LeftHandThumb4", "Armature/Skeleton:mixamorig_LeftLeg", "Armature/Skeleton:mixamorig_LeftShoulder", "Armature/Skeleton:mixamorig_LeftUpLeg", "Armature/Skeleton:mixamorig_Neck", "Armature/Skeleton:mixamorig_RightArm", "Armature/Skeleton:mixamorig_RightForeArm", "Armature/Skeleton:mixamorig_RightHand", "Armature/Skeleton:mixamorig_RightHandIndex1", "Armature/Skeleton:mixamorig_RightHandIndex2", "Armature/Skeleton:mixamorig_RightHandIndex3", "Armature/Skeleton:mixamorig_RightHandIndex4", "Armature/Skeleton:mixamorig_RightHandMiddle1", "Armature/Skeleton:mixamorig_RightHandMiddle2", "Armature/Skeleton:mixamorig_RightHandMiddle3", "Armature/Skeleton:mixamorig_RightHandMiddle4", "Armature/Skeleton:mixamorig_RightHandPinky1", "Armature/Skeleton:mixamorig_RightHandPinky2", "Armature/Skeleton:mixamorig_RightHandPinky3", "Armature/Skeleton:mixamorig_RightHandPinky4", "Armature/Skeleton:mixamorig_RightHandRing1", "Armature/Skeleton:mixamorig_RightHandRing2", "Armature/Skeleton:mixamorig_RightHandRing3", "Armature/Skeleton:mixamorig_RightHandRing4", "Armature/Skeleton:mixamorig_RightHandThumb1", "Armature/Skeleton:mixamorig_RightHandThumb2", "Armature/Skeleton:mixamorig_RightHandThumb3", "Armature/Skeleton:mixamorig_RightHandThumb4", "Armature/Skeleton:mixamorig_RightShoulder" ]

[sub_resource type="AnimationNodeBlendTree" id=38]
graph_offset = Vector2( -409.173, -19.1213 )
nodes/Animation/node = SubResource( 47 )
nodes/Animation/position = Vector2( 0, 146.667 )
"nodes/Animation 2/node" = SubResource( 53 )
"nodes/Animation 2/position" = Vector2( -26.6667, 386.667 )
"nodes/Animation 3/node" = SubResource( 59 )
"nodes/Animation 3/position" = Vector2( -66.6667, 266.667 )
nodes/ChairBlend/node = SubResource( 60 )
nodes/ChairBlend/position = Vector2( 186.667, 160 )
nodes/IntrumentBlend/node = SubResource( 54 )
nodes/IntrumentBlend/position = Vector2( 360, 266.667 )
nodes/output/position = Vector2( 533.333, 160 )
node_connections = [ "IntrumentBlend", 0, "ChairBlend", "IntrumentBlend", 1, "Animation 2", "output", 0, "IntrumentBlend", "ChairBlend", 0, "Animation", "ChairBlend", 1, "Animation 3" ]

[sub_resource type="AnimationNodeAnimation" id=55]
animation = "Standing"

[sub_resource type="AnimationNodeStateMachineTransition" id=39]
advance_condition = "Dead"
xfade_time = 0.5

[sub_resource type="AnimationNodeStateMachineTransition" id=42]
advance_condition = "Sitting"
xfade_time = 0.5

[sub_resource type="AnimationNodeStateMachineTransition" id=51]
advance_condition = "Dead"
xfade_time = 1.0

[sub_resource type="AnimationNodeStateMachineTransition" id=52]
advance_condition = "Sitting"
xfade_time = 1.0

[sub_resource type="AnimationNodeStateMachineTransition" id=57]
switch_mode = 2
auto_advance = true
xfade_time = 0.5

[sub_resource type="AnimationNodeStateMachineTransition" id=58]
advance_condition = "Idle"

[sub_resource type="AnimationNodeStateMachineTransition" id=56]
advance_condition = "Idle"

[sub_resource type="AnimationNodeStateMachine" id=45]
states/Dead/node = SubResource( 37 )
states/Dead/position = Vector2( 707.333, 254.235 )
states/Sitting/node = SubResource( 38 )
states/Sitting/position = Vector2( 520.667, 48 )
states/Standing/node = SubResource( 55 )
states/Standing/position = Vector2( 509.111, 171.334 )
states/Walking/node = ExtResource( 6 )
states/Walking/position = Vector2( 326, 235.866 )
transitions = [ "Walking", "Dead", SubResource( 39 ), "Walking", "Sitting", SubResource( 42 ), "Sitting", "Dead", SubResource( 51 ), "Dead", "Sitting", SubResource( 52 ), "Standing", "Walking", SubResource( 57 ), "Sitting", "Standing", SubResource( 58 ), "Dead", "Standing", SubResource( 56 ) ]
start_node = "Walking"
graph_offset = Vector2( -234, -139 )

[sub_resource type="AnimationNodeStateMachinePlayback" id=46]

[sub_resource type="ParticlesMaterial" id=34]
lifetime_randomness = 0.24
emission_shape = 2
emission_box_extents = Vector3( 0.6, 0.1, 0.2 )
direction = Vector3( 0, 5, -10 )
spread = 9.06
gravity = Vector3( 0, 0, 0 )
initial_velocity = 1.0

[sub_resource type="SpatialMaterial" id=61]
flags_transparent = true
params_blend_mode = 1
params_billboard_mode = 3
particles_anim_h_frames = 1
particles_anim_v_frames = 1
particles_anim_loop = false
albedo_color = Color( 1, 1, 1, 0.380392 )
albedo_texture = ExtResource( 9 )

[sub_resource type="QuadMesh" id=62]
material = SubResource( 61 )

[node name="Gen3Machine" instance=ExtResource( 2 )]

[node name="Armature" parent="." index="0"]
transform = Transform( 0.024, 0, 0, 0, 0.024, 6.77112e-09, 0, -6.77112e-09, 0.024, 0, 0, 0 )

[node name="Arms" parent="Armature/Skeleton" index="0"]
material/0 = ExtResource( 3 )

[node name="Body" parent="Armature/Skeleton" index="1"]
material/0 = ExtResource( 4 )

[node name="Face" parent="Armature/Skeleton" index="3"]
material/0 = ExtResource( 5 )

[node name="LegsBot" parent="Armature/Skeleton" index="4"]
material/0 = ExtResource( 1 )

[node name="LegsTop" parent="Armature/Skeleton" index="5"]
material/0 = ExtResource( 1 )

[node name="LegsUpper" parent="Armature/Skeleton" index="6"]
material/0 = ExtResource( 4 )

[node name="BoneAttachment" type="BoneAttachment" parent="Armature/Skeleton" index="7"]
transform = Transform( 0.997587, -0.0633482, -0.0284133, 0.0596192, 0.99134, -0.117001, 0.035579, 0.115024, 0.992725, -2.41786, 265.235, 12.1414 )
bone_name = "mixamorig_Head"

[node name="HeadPivot" type="Spatial" parent="Armature/Skeleton/BoneAttachment" index="0"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 23.077, 23.499 )

[node name="NightLight" type="SpotLight" parent="Armature/Skeleton/BoneAttachment/HeadPivot" index="0"]
transform = Transform( -41.6571, 0.347552, 0.824382, 0.547541, 40.268, 10.6912, -0.707532, 10.6996, -40.2632, 0, 0, 7.62939e-06 )
portal_mode = 1
include_in_bound = false
allow_merging = false
layers = 3
light_color = Color( 0.580392, 1, 0.619608, 1 )
light_energy = 0.5
light_bake_mode = 0
shadow_enabled = true
shadow_bias = 0.0
shadow_reverse_cull_face = true
spot_range = 58.3185
spot_angle = 47.5769

[node name="BoneAttachment2" type="BoneAttachment" parent="Armature/Skeleton" index="8"]
transform = Transform( 0.994635, 0.0570976, -0.0862603, -0.0622686, 0.996344, -0.0584937, 0.0826051, 0.0635512, 0.994554, -0.38426, 183.751, 0.772516 )
bone_name = "mixamorig_Hips"

[node name="RemoteTransform" type="RemoteTransform" parent="Armature/Skeleton/BoneAttachment2" index="0"]
transform = Transform( 0.999965, -0.00839581, 0.000567049, 0.00840242, 0.999882, -0.0129143, -0.000458688, 0.0129187, 0.999916, -48.6215, -6.65862, 25.3466 )
remote_path = NodePath("../../../../Bouzouki")
update_rotation = false
update_scale = false

[node name="AnimationPlayer" parent="." index="1"]
script = ExtResource( 10 )

[node name="AnimationTree" type="AnimationTree" parent="AnimationPlayer" index="0"]
tree_root = SubResource( 45 )
anim_player = NodePath("..")
active = true
process_mode = 0
root_motion_track = NodePath("Armature/Skeleton:Bone")
parameters/playback = SubResource( 46 )
parameters/conditions/Dead = false
parameters/conditions/Idle = false
parameters/conditions/Sitting = false
parameters/Sitting/ChairBlend/blend_amount = 0.0
parameters/Sitting/IntrumentBlend/blend_amount = 0.0
parameters/Walking/ClimbDown/active = false
parameters/Walking/ClimbUp/active = false
parameters/Walking/Idle_Run_Blend/blend_amount = 0.0
parameters/Walking/Idle_Walk_Blend/blend_amount = 0.0
parameters/Walking/IntrumentBlend/blend_amount = 0.0
parameters/Walking/JumpShot/active = false
parameters/Walking/TimeScale/scale = 1.0
"parameters/Walking/TimeScale 2/scale" = 1.0

[node name="Particles" type="Particles" parent="." index="2"]
sorting_use_aabb_center = false
cast_shadow = 0
generate_lightmap = false
local_coords = false
draw_order = 2
process_material = SubResource( 34 )
draw_pass_1 = SubResource( 62 )

[node name="Bouzouki" parent="." index="3" instance=ExtResource( 7 )]
transform = Transform( -0.0272753, 0.896328, -0.442218, -0.827402, 0.227855, 0.512926, 0.560608, 0.379958, 0.735556, -1.23148, 4.28788, 0.516995 )
visible = false
sleeping = true
RegisterOnIsland = false
